
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
 <link rel="shortcut icon" href="../../images/favicon.ico">
<title>민원사항</title>
<style>
.uk-thumbnail {
  position: relative;
  width: 290px;
  height: 218px; 
  overflow: hidden;
}
.uk-thumbnail img {
  position: absolute;
  left: 50%;
  top: 50%;
  height: 100%;
  width: auto;
  -webkit-transform: translate(-50%,-50%);
      -ms-transform: translate(-50%,-50%);
          transform: translate(-50%,-50%);
}
.uk-thumbnail img.portrait {
  width: 100%;
  height: auto;
}
</style>
<link id="data-uikit-theme" rel="stylesheet"
	href="../../node_modules/uikit/dist/css/uikit.almost-flat.min.css">
<link rel="stylesheet" href="../../css/board/complain.css" />
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">


</head>
<body>

	<!-- 헤더 -->
	<header>
		<span><i></i></span>
		<h1>
			<b>민원사항</b>
		</h1>
		<div>
			<ul class="uk-tab tabs" data-uk-tab>
				<li class="uk-active" rel="tab1"><a href="#">미처리 민원</a></li>
				<li rel="tab2"><a href="#">처리된 민원</a></li>
			</ul>
		</div>
	</header>

	<br>
	<br>

	<div class="tab_container">
		<!---------------------------------------------------- #tab1 미처리 --------------------------------------------->
		<div id="tab1" class="tab_content">
			<div id="complainTable">
				<div class="king"></div>
			</div>

			<script id="trTemplateText" type="text/x-handlebars-template">
{{#each list}}
	<div class="uk-thumbnail uk-thumbnail-medium">
 <img src="../../upload/{{filename}}" alt="Canada" 
		onerror="this.onerror=null;this.src='../../images/camera.png';"
		 class="portrait">
		<br>
      </div>
		<div class="uk-thumbnail-caption">
        <p id="title">{{title}}</p><p>({{writer}})</p>
		<button type="button" class="uk-button card1" id="modalbutton1" 
		data-toggle="modal" data-val1="{{no}}" data-target=".bs-example-modal-lg1">전체 읽기</button>
	</div>
    </div>
{{/each}}
</script>
			<!-- 리스트 -->
			<div class="complain_pagination">
				<button id="prevBtn" type="button"
					class="uk-button uk-button-primary">이전</button>
				<span id="pageNo">1</span>
				<button id="nextBtn" type="button"
					class="uk-button uk-button-primary">다음</button>
			</div>
		</div>
		<!-------------------------------------------------- 모달 시작(미처리) -------------------------------------------------------------->
		<div class="modal fade bs-example-modal-lg1" tabindex="-1"
			role="dialog" aria-labelledby="myLargeModalLabel">
			<div class="modal-dialog modal-lg" role="document">
				<div class="modal-content">
					<!-- header -->
					<div class="modal-header">
						<!-- 닫기(x) 버튼 -->
						<button type="button" class="close" data-dismiss="modal">×</button>
						<!-- 헤더 타이틀 -->
						<h4 class="modal-title1">
							<p id="modal-title1"></p>
							<h5 id="modal-writer1"></h5>
						</h4>
					</div>
					<!-- 바디 -->
					<div class="modal-body" id="body">
						<textarea id="contents1" class="form-control" cols="50" rows="10"
							placeholder="내용입니다." style="background: white" readonly></textarea>
					</div>
					<!-- 푸터 -->
					<div class="modal-footer">
						<div class="uk-form-row">
							<div class="uk-form-controls">
								<input id="rsvd_1" type="radio" name="rsvdMaterial1" value="미처리"
									checked>미처리 <input type="radio" name="rsvdMaterial1"
									value="처리">처리
							</div>
							<br>
						</div>
						<div class="uk-button-group">
							<a class="uk-button" id="updateBtn1">수정</a>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-------------------------------------------------- 모달 끝 ---------------------------------------------------------------------->

		<!---------------------------------------------------- #tab2 처리 --------------------------------------------->
		<div id="tab2" class="tab_content">
			<div id="complainTable2">
				<div class="kingking"></div>
			</div>
			<script id="trTemplateText2" type="text/x-handlebars-template">
{{#each list}}
	<div class="uk-thumbnail uk-thumbnail-medium">
       <img src="../../upload/{{filename}}" alt="Canada" 
		onerror="this.onerror=null;this.src='../../images/camera.png';"
		class="portrait">
		</div>
		<div class="uk-thumbnail-caption">
        <p id="tab2-title">{{title}}</p><p>({{writer}})</p>
		<button type="button" class="uk-button card0" id="modalbutton0" 
		data-toggle="modal" data-val0="{{no}}" data-target=".bs-example-modal-lg0">전체 읽기</button>
      </div>
    </div>
{{/each}}
</script>
			<!-- 리스트 -->
			<div class="complain_pagination">
				<button id="prevBtn2" type="button"
					class="uk-button uk-button-primary">이전</button>
				<span id="pageNo_tab2">1</span>
				<button id="nextBtn2" type="button"
					class="uk-button uk-button-primary">다음</button>
			</div>
		</div>

	</div>
	<!-- tab container -->

	<!-------------------------------------------------- 모달 시작(처리) -------------------------------------------------------------->
	<div class="modal fade bs-example-modal-lg0" tabindex="-1"
		role="dialog" aria-labelledby="myLargeModalLabel">
		<div class="modal-dialog modal-lg" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal">×</button>
					<h4 class="modal-title0">
						<p id="modal-title0"></p>
						<h5 id="modal-writer0"></h5>
					</h4>
				</div>
				<div class="modal-body" id="body">
					<textarea id="contents0" class="form-control" cols="50" rows="10"
						placeholder="내용입니다." style="background: white" readonly></textarea>
				</div>
				<div class="modal-footer">
					<div class="uk-form-row">
						<div class="uk-form-controls">
							<input type="radio" name="rsvdMaterial0" value="미처리">미처리
							<input id="rsvd0" type="radio" name="rsvdMaterial0" value="처리"
								checked>처리
						</div>
						<br>
					</div>
					<div class="uk-button-group">
						<a class="uk-button" id="updateBtn0">수정</a>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-------------------------------------------------- 모달 끝 -------------------------------------------------------------->

	<script src="../../node_modules/jquery/dist/jquery.min.js"></script>
	<script src="../../node_modules/handlebars/dist/handlebars.min.js"></script>
	<script src="../../node_modules/uikit/dist/js/uikit.min.js"></script>
	<script src="../../node_modules/uikit/dist/js/core/tab.min.js"></script>

	<script type="text/javascript" src="../../js/common.js"></script>
	<script type="text/javascript" src="../../js/bit.js"></script>
	<script type="text/javascript" src="../../js/board/complain_l.js"></script>


	<script
		src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	<!--------------------------------------------------------- 모달 load 자바스크립트 코드------------------------------------------------->

	<script type="text/javascript">
		ajaxComplainListRsvd1()
		ajaxComplainListRsvd0() 
	</script>

	<script type="text/javascript">
		$(function() {
			$(document.body).on('click', '.card1', function() {
				var no = $(this).attr("data-val1");
				console.log(no);
				ajaxLoadComplain(no)
			}) 
		})
	</script>
	<script type="text/javascript">
		$(function() {
			$(document.body).on('click', '.card0', function() {
				var no = $(this).attr("data-val0");
				console.log(no);
				ajaxLoadComplain(no)
			})
		})
	</script>

	<script>
	function ajaxLoadComplain(no) {
		$.getJSON(serverAddr + "/complain/detail.json?no=" + no, function(obj) {
			var result = obj.jsonResult
			if (result.state != "success") {
				alert("조회 실패입니다.")
				return
			}
			$("#modal-title1").text(result.data.title);
			$("#modal-title0").text(result.data.title);
			$("#contents1").text(result.data.contents);
			$("#contents0").text(result.data.contents);
			$("#modal-writer0").text(result.data.writer);
			$("#modal-writer1").text(result.data.writer);
		          
		})
	}
	</script>

</body>
</html>


